{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Skill Card v2",
  "type": "object",
  "required": ["id", "module", "topic", "rule", "anti_rule", "confidence"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^SKILL:[A-Z_]+:[A-Z_]+:[0-9]{3}$"
    },
    "module": {
      "type": "string",
      "enum": ["g_motor", "biocore_child", "nexus_prime", "guardian", "common"]
    },
    "topic": {
      "type": "string",
      "maxLength": 50
    },
    "confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0
    },
    "rule": {
      "type": "object",
      "required": ["trigger", "action", "expected_outcome"],
      "properties": {
        "trigger": {"type": "string"},
        "action": {"type": "string"},
        "expected_outcome": {"type": "string"}
      }
    },
    "anti_rule": {
      "type": "object",
      "required": ["never_when", "reason"],
      "properties": {
        "never_when": {"type": ["string", "array"]},
        "reason": {"type": "string"}
      }
    },
    "evidence": {"type": "object"},
    "metadata": {"type": "object"}
  }
}
